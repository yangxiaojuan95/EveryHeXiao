(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mumu-one-code-index"],{"0cf3":function(t,a,e){"use strict";e.r(a);var i=e("52ca"),n=e("c5df");for(var o in n)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(o);var r=e("f0c5"),s=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"3ab9f356",null,!1,i["a"],void 0);a["default"]=s.exports},1686:function(t,a,e){"use strict";(function(t){e("7a82");var i=e("4ea4").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,e("e9c4");var n=i(e("fa5a")),o={components:{mumuGetQrcode:n.default},data:function(){return{type:null}},onLoad:function(t){this.type=t.type},methods:{qrcodeSucess:function(t){if(1==this.type){var a=JSON.stringify(t);uni.setStorageSync("bgKey",a),uni.navigateTo({url:"/pages/login/index"})}2==this.type&&uni.navigateTo({url:"/pages/index/index?data=".concat(t)})},qrcodeError:function(a){t.log(a),uni.showModal({title:"摄像头授权失败",content:"摄像头授权失败，请检测当前浏览器是否有摄像头权限。",success:function(){uni.navigateBack({})}})}}};a.default=o}).call(this,e("5a52")["default"])},"4fa5":function(t,a,e){"use strict";e.r(a);var i=e("d178"),n=e.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(o);a["default"]=n.a},"52ca":function(t,a,e){"use strict";e.d(a,"b",(function(){return i})),e.d(a,"c",(function(){return n})),e.d(a,"a",(function(){}));var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.hide.apply(void 0,arguments)}}},[e("mumu-get-qrcode",{attrs:{exact:"environment",definition:"true"},on:{success:function(a){arguments[0]=a=t.$handleEvent(a),t.qrcodeSucess.apply(void 0,arguments)},error:function(a){arguments[0]=a=t.$handleEvent(a),t.qrcodeError.apply(void 0,arguments)}}})],1)},n=[]},6072:function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,'uni-page-body[data-v-3637e530]{background-color:#333}body.?%PAGE?%[data-v-3637e530]{background-color:#333}.canvasBox[data-v-3637e530]{width:100vw;height:100vh;position:relative;background-image:linear-gradient(0deg,transparent 24%,rgba(32,255,77,.1) 25%,rgba(32,255,77,.1) 26%,transparent 27%,transparent 74%,rgba(32,255,77,.1) 75%,rgba(32,255,77,.1) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(32,255,77,.1) 25%,rgba(32,255,77,.1) 26%,transparent 27%,transparent 74%,rgba(32,255,77,.1) 75%,rgba(32,255,77,.1) 76%,transparent 77%,transparent);background-size:3rem 3rem;background-position:-1rem -1rem;z-index:10;background-color:rgba(17,17,17,0)}.box[data-v-3637e530]{width:200px;height:200px;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);overflow:hidden;border:.1rem solid rgba(0,255,51,.2);z-index:11}.line[data-v-3637e530]{height:calc(100% - 2px);width:100%;background:linear-gradient(180deg,rgba(0,255,51,0) 43%,#0f3 211%);border-bottom:3px solid #0f3;-webkit-transform:translateY(-100%);transform:translateY(-100%);-webkit-animation:radar-beam-data-v-3637e530 2s infinite alternate;animation:radar-beam-data-v-3637e530 2s infinite alternate;-webkit-animation-timing-function:cubic-bezier(.53,0,.43,.99);animation-timing-function:cubic-bezier(.53,0,.43,.99);-webkit-animation-delay:1.4s;animation-delay:1.4s}.box[data-v-3637e530]:after,\r\n.box[data-v-3637e530]:before,\r\n.angle[data-v-3637e530]:after,\r\n.angle[data-v-3637e530]:before{content:"";display:block;position:absolute;width:3vw;height:3vw;z-index:12;border:.2rem solid transparent}.box[data-v-3637e530]:after,\r\n.box[data-v-3637e530]:before{top:0;border-top-color:#0f3}.angle[data-v-3637e530]:after,\r\n.angle[data-v-3637e530]:before{bottom:0;border-bottom-color:#0f3}.box[data-v-3637e530]:before,\r\n.angle[data-v-3637e530]:before{left:0;border-left-color:#0f3}.box[data-v-3637e530]:after,\r\n.angle[data-v-3637e530]:after{right:0;border-right-color:#0f3}@-webkit-keyframes radar-beam-data-v-3637e530{0%{-webkit-transform:translateY(-100%);transform:translateY(-100%)}100%{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes radar-beam-data-v-3637e530{0%{-webkit-transform:translateY(-100%);transform:translateY(-100%)}100%{-webkit-transform:translateY(0);transform:translateY(0)}}.msg[data-v-3637e530]{text-align:center;padding:%?20?% 0}.box2[data-v-3637e530]{width:300px;height:200px;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:20}.track[data-v-3637e530]{position:absolute;bottom:-100px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);z-index:20;color:#fff;display:flex;flex-direction:column;align-items:center}.mask[data-v-3637e530]{position:absolute;z-index:10;background-color:rgba(0,0,0,.55)}.mask1[data-v-3637e530]{top:0;left:0;right:0}.mask2[data-v-3637e530]{right:0}.mask3[data-v-3637e530]{right:0;left:0;bottom:0}.mask4[data-v-3637e530]{left:0}.error[data-v-3637e530]{color:#fff;padding:%?40?%;font-size:%?24?%;background-color:#333;position:fixed;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:%?550?%;border-radius:%?20?%}.error .on1[data-v-3637e530]{font-size:%?30?%}',""]),t.exports=a},6375:function(t,a,e){var i=e("6072");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("4f06").default;n("24b514df",i,!0,{sourceMap:!1,shadowMode:!1})},c5df:function(t,a,e){"use strict";e.r(a);var i=e("1686"),n=e.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(o);a["default"]=n.a},cc28:function(t,a,e){"use strict";e.d(a,"b",(function(){return i})),e.d(a,"c",(function(){return n})),e.d(a,"a",(function(){}));var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"canvasBox"},[t.isUse?[e("v-uni-view",{staticClass:"box"},[e("v-uni-view",{staticClass:"line"}),e("v-uni-view",{staticClass:"angle"})],1),t.isUseTorch?e("v-uni-view",{staticClass:"box2"},[e("v-uni-view",{staticClass:"track",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.openTrack.apply(void 0,arguments)}}},[e("svg",{staticClass:"icon",attrs:{t:"1653920715959",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1351",width:"32",height:"32"}},[e("path",{attrs:{d:"M651.353043 550.479503H378.752795L240.862609 364.315031c-3.688944-4.897391-5.660621-10.876025-5.660621-17.045466v-60.040745c0-15.773416 12.847702-28.621118 28.621118-28.621118h502.459627c15.773416 0 28.621118 12.847702 28.621118 28.621118v59.977143c0 6.105839-1.971677 12.084472-5.660621 17.045466l-137.890187 186.228074zM378.752795 598.308571v398.024348c0 15.328199 12.402484 27.667081 27.667081 27.667081h217.266087c15.328199 0 27.667081-12.402484 27.66708-27.667081V598.308571H378.752795z m136.300124 176.942112c-14.564969 0-26.331429-11.76646-26.331428-26.331428v-81.283975c0-14.564969 11.76646-26.331429 26.331428-26.331429 14.564969 0 26.331429 11.76646 26.331429 26.331429v81.283975c0 14.564969-11.76646 26.331429-26.331429 26.331428zM512 222.608696c-17.554286 0-31.801242-14.246957-31.801242-31.801243V31.801242c0-17.554286 14.246957-31.801242 31.801242-31.801242s31.801242 14.246957 31.801242 31.801242v159.006211c0 17.554286-14.246957 31.801242-31.801242 31.801243zM280.932174 205.881242c-9.47677 0-18.889938-4.197764-25.122981-12.275279L158.242981 67.991056a31.864845 31.864845 0 0 1 5.597019-44.648944 31.864845 31.864845 0 0 1 44.648944 5.597018l97.502609 125.551305a31.864845 31.864845 0 0 1-5.597019 44.648944c-5.787826 4.579379-12.656894 6.741863-19.46236 6.741863zM723.987081 205.881242c-6.805466 0-13.674534-2.162484-19.462361-6.678261a31.794882 31.794882 0 0 1-5.597018-44.648944l97.566211-125.551304a31.794882 31.794882 0 0 1 44.648944-5.597019 31.794882 31.794882 0 0 1 5.597019 44.648944l-97.566211 125.551305c-6.360248 8.077516-15.709814 12.27528-25.186584 12.275279z",fill:"#ffffff","p-id":"1352"}})]),t._v(t._s(t.trackStatus?"关闭闪光灯":"打开闪光灯"))])],1):t._e(),e("v-uni-view",{staticClass:"mask1 mask",style:"height:"+t.maskHeight+"px;"}),e("v-uni-view",{staticClass:"mask2 mask",style:"width:"+t.maskWidth+"px;top:"+t.maskHeight+"px;height:"+t.canvasHeight+"px"}),e("v-uni-view",{staticClass:"mask3 mask",style:"height:"+t.maskHeight+"px;"}),e("v-uni-view",{staticClass:"mask4 mask",style:"width:"+t.maskWidth+"px;top:"+t.maskHeight+"px;height:"+t.canvasHeight+"px"})]:[t._t("error",[e("v-uni-view",{staticClass:"error"},[e("v-uni-view",{staticClass:"on1"},[t._v("相机权限被拒绝，请尝试如下操作：")]),e("v-uni-view",[t._v("· 刷新页面后重试；")]),e("v-uni-view",[t._v("· 在系统中检测当前App或浏览器的相机权限是否被禁用；")]),e("v-uni-view",[t._v("· 如果依然不能体验，建议在微信中打开链接；")])],1)])]],2)},n=[]},d178:function(t,a,e){"use strict";e("7a82");var i=e("4ea4").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,e("c975"),e("99af"),e("d3b7"),e("159b");var n=i(e("4888")),o={props:{continue:{type:Boolean,default:!1},exact:{type:String,default:"environment"},size:{type:String,default:"whole"},definition:{type:Boolean,default:!1}},data:function(){return{windowWidth:0,windowHeight:0,video:null,canvas2d:null,canvas2d2:null,canvasWidth:200,canvasHeight:200,maskWidth:0,maskHeight:0,inter:0,track:null,isUseTorch:!1,trackStatus:!1,isParse:!1,isUse:!0}},mounted:function(){var t=this;if(-1===origin.indexOf("https"))throw"请在 https 环境中使用摄像头组件。";this.windowWidth=document.documentElement.clientWidth||document.body.clientWidth,this.windowHeight=document.documentElement.clientHeight||document.body.clientHeight,this.windowHeight="whole"===this.size?this.windowHeight:this.windowHeight/2,this.isParse=!0,this.$nextTick((function(){t.createMsk(),t.openScan()}))},destroyed:function(){this.closeCamera()},methods:{openScan:function(){var t=this,a=this.transtion(this.windowHeight),e=this.transtion(this.windowWidth),i={audio:!1,video:{facingMode:{exact:this.exact},width:a,height:e}};navigator.mediaDevices.getUserMedia(i).then((function(a){t.video=document.createElement("video"),t.video.width=t.windowWidth,t.video.height=t.windowHeight;var e=document.createElement("canvas");e.id="canvas",e.width=t.transtion(t.canvasWidth),e.height=t.transtion(t.canvasHeight),e.style="display:none;",t.canvas2d=e.getContext("2d");var i=document.querySelector(".canvasBox");i.append(t.video),i.append(e),i.style="width:".concat(t.windowWidth,"px;height:").concat(t.windowHeight,"px;");var n=document.createElement("canvas");n.id="canvas2",n.width=t.canvasWidth,n.height=t.canvasHeight,n.style="position: absolute;top: 50%;left: 50%;z-index: 20;transform: translate(-50%, -50%);",t.canvas2d2=n.getContext("2d"),i.append(n),t.video.srcObject=a,t.video.setAttribute("playsinline",!0),t.video.play(),t.tick(),t.track=a.getVideoTracks()[0],setTimeout((function(){t.isUseTorch=t.track.getCapabilities().torch||null}),500)})).catch((function(a){t.isUse=!1,t.$emit("error",a)}))},closeCamera:function(){this.isParse=!1,this.video&&this.video.srcObject&&this.video.srcObject.getTracks().forEach((function(t){t.stop()}))},tick:function(){if(this.isParse){if(this.video.readyState===this.video.HAVE_ENOUGH_DATA){this.canvas2d.drawImage(this.video,this.transtion(this.maskWidth),this.transtion(this.maskHeight),this.transtion(200),this.transtion(200),0,0,this.transtion(this.canvasWidth),this.transtion(this.canvasHeight));var t=this.canvas2d.getImageData(0,0,this.transtion(this.canvasWidth),this.transtion(this.canvasHeight)),a=(0,n.default)(t.data,t.width,t.height,{inversionAttempts:"dontInvert"});this.canvas2d2.clearRect(0,0,this.canvasWidth,this.canvasHeight),a&&(this.drawLine(a.location.topLeftCorner,a.location.topRightCorner),this.drawLine(a.location.topRightCorner,a.location.bottomRightCorner),this.drawLine(a.location.bottomRightCorner,a.location.bottomLeftCorner),this.drawLine(a.location.bottomLeftCorner,a.location.topLeftCorner),a.data&&this.getData(a.data))}requestAnimationFrame(this.tick)}},drawLine:function(t,a){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#FF3B58";this.canvas2d2.beginPath(),this.canvas2d2.moveTo(this.nutranstion(t.x),this.nutranstion(t.y)),this.canvas2d2.lineTo(this.nutranstion(a.x),this.nutranstion(a.y)),this.canvas2d2.lineWidth=4,this.canvas2d2.strokeStyle=e,this.canvas2d2.stroke()},getData:function(t){this.$emit("success",t),this.continue||this.closeCamera()},openTrack:function(){this.trackStatus=!this.trackStatus,this.track.applyConstraints({advanced:[{torch:this.trackStatus}]})},createMsk:function(){this.maskWidth=this.windowWidth/2-this.canvasWidth/2,this.maskHeight=this.windowHeight/2-this.canvasHeight/2},transtion:function(t){return this.definition?2.8*t:1.8*t},nutranstion:function(t){return this.definition?t/2.8:t/1.8}}};a.default=o},d25d:function(t,a,e){"use strict";var i=e("6375"),n=e.n(i);n.a},fa5a:function(t,a,e){"use strict";e.r(a);var i=e("cc28"),n=e("4fa5");for(var o in n)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(o);e("d25d");var r=e("f0c5"),s=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"3637e530",null,!1,i["a"],void 0);a["default"]=s.exports}}]);